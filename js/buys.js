"use strict";var top01=document.getElementById("top01"),topright=top01.children[0].children[1],liS=topright.children[0].children;liS[0].onmouseover=function(){var t=this.style.background;this.style.background="#ffffff";var n=this.children[1];n.style.display="block",liS[0].onmouseout=function(){this.style.background=t,n.style.display="none"}},liS[2].onmouseover=function(){var t=this.style.background;this.style.background="#ffffff";var n=this.children[1];n.style.display="block",liS[2].onmouseout=function(){this.style.background=t,n.style.display="none"}},liS[4].onmouseover=function(){var t=this.children[1];t.style.display="block",liS[4].onmouseout=function(){t.style.display="none"}},liS[6].onmouseover=function(){var t=this.style.background;this.style.background="#ffffff";var n=this.children[1];n.style.display="block",liS[6].onmouseout=function(){this.style.background=t,n.style.display="none"}},liS[7].onmouseover=function(){var t=this.children[1];t.style.display="block",liS[7].onmouseout=function(){t.style.display="none"}},$(function(){$.ajax({url:"../php/buy.php",dataType:"json",success:function(t){$.each(t.data,function(t,n){var e=n.product_price.split("￥").join("");$("#table").append('<tr class="buy_tr">\n                    <td>\n                        <input type="checkbox" name="单选" value="一件" class="checka"> \n                    </td>\n                    <td>\n                        <a href="#" class="td_img">\n                            <img src="'.concat(n.product_img,'" alt="">\n                        </a>\n                        <a href="#" class="td_name">\n                            ').concat(n.product_name,'\n                        </a>\n                        <p class="td_p">\n                            商品编号：<i class="td_id">').concat(n.product_id,'</i>\n                        </p>\n                    </td>\n                    <td class="td_money">').concat(n.product_price,'</td>\n                    <td>\n                        <button class="td_nejt">-</button>\n                        <span class="td_num">').concat(n.product_num,'</span>\n                        <button class="td_clon">+</button>\n                    </td>\n                    <td class="td_moneyall">\n                        ￥').concat((e*n.product_num).toFixed(2),'\n                    </td>\n                    <td>\n                        <a href="#" class="td_remove">删除</a>\n                    </td>\n                </tr>'))})}});var o=null;function c(){$(".td_num").each(function(t,n){var e=$(this).html(),o=$(".td_money").eq(t).html();o=o.split("￥").join(""),$(".td_moneyall").eq(t).html("￥"+(o*e).toFixed(2))});var o=0;$(".bagcolor").each(function(t,n){var e=$(this).find(".td_moneyall").html();o+=Number(e.split("￥").join(""))}),$(".moo").html(o.toFixed(2))}$("#table").on("click",".td_clon",function(){clearTimeout(o);var t=$(this).parent().find(".td_num").html(),n=Number(t)+1,e=$(this).parent().parent().find(".td_id").html();$(this).parent().find(".td_num").html(n),c(),o=setTimeout(function(){$.ajax({url:"../php/jia.php",dataType:"json",data:{newnum:n,id:e},success:function(t){t.code&&alert("商品增加成功")}})},3e3)}),$("#table").on("click",".td_nejt",function(){clearTimeout(o);var t=$(this).parent().find(".td_num").html(),n=Number(t)-1;n<=0&&(n=1);var e=$(this).parent().parent().find(".td_id").html();$(this).parent().find(".td_num").html(n),c(),o=setTimeout(function(){$.ajax({url:"../php/jia.php",dataType:"json",data:{newnum:n,id:e},success:function(t){t.code&&alert("商品减少成功")}})},3e3)}),$("#table").on("click",".td_remove",function(){if(confirm("你确定删除该商品吗")){var t=$(this).parent().parent().find(".td_id").html();$(this).parent().parent().remove(),$.ajax({url:"../php/del.php",data:{id:t},dataType:"json",success:function(t){t.code?alert("商品删除成功"):alert("商品删除失败")}})}}),c(),$(".checkall").change(function(){var t=$(this).prop("checked");$(".checka").prop("checked",t),$(".checka").prop("checked")?$(".buy_tr").addClass("bagcolor"):$(".buy_tr").removeClass("bagcolor"),c()}),$("#table").on("change",".checka",function(){$(".checka").each(function(t,n){$(this).change(function(){$(this).prop("checked")?$(".buy_tr").eq(t).addClass("bagcolor"):($(".buy_tr").eq(t).removeClass("bagcolor"),$(".checkall").prop("checked",!1)),c()})})}),console.log(222)});